<div class="row p-15">
	<div class="col-md-8">
		<div class="panel panel-default tile">
			<div class="panel-heading">
				<h3 class="panel-title">Agent</h3>
			</div>
			<div class="p-15">
				<form ng-submit="update($event)" name="AgentForm">
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="agentName">Name</label>
								<input type="text" id="agentName" class="form-control" ng-model="agent.name"/>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="agentVersion">Version</label>
								<input class="form-control" id="agentVersion" ng-value="(editVersion.moment | date: 'medium')"
										 readonly/>
							</div>
						</div>
					</div>


					<div class="form-group">
						<label for="agentName">Code</label>
					<textarea ui-codemirror ui-codemirror-opts="editorOptions" ng-model="editVersion.code"
								 class="form-control auto-size input-sm" id="newAgentCode" name="code"></textarea>

						<div ng-messages="NewAgentForm.code.$error">
							<div ng-message="required">Name is required</div>
							<div ng-message="minlength">Name need at least 5 characters</div>
						</div>
					</div>

					<div class="text-right">
						<button ng-click="update($event)" class="btn btn-primary" ng-disabled="!AgentForm.code.$dirty">Update
							Agent
						</button>
					</div>

				</form>
			</div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="alert alert-success" ng-if="message">
			{{message}}
		</div>
		<div class="alert alert-danger" ng-if="error">
			{{error}}
		</div>

		<h3 class="block-title m-t-0">Last 10 versions</h3>

		<div class="tile ng-scope">
			<table class="table table-bordered">
				<thead>
				<tr class="panel-title">
					<th></th>
					<th></th>
					<th>Version</th>
					<th class="text-right">Battles</th>
					<th class="text-right">View</th>
				</tr>
				</thead>
				<tbody>
				<tr ng-repeat="version in versions track by $index">
					<td><span class="icon" ng-if="version._id == editVersion._id" tooltip="You are seeing this"></span></td>
					<td><span class="icon" ng-if="$first" title="Used in battles" tooltip="Used in battles"></span></td>
					<td><span am-time-ago="version.moment"
								 tooltip="{{version.moment | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}"></span></td>
					<td class="text-right">0</td>
					<td class="text-right">
						<button ng-click="loadVersion($event,version)" class="btn btn-default btn-xs">View</button>
					</td>
				</tr>
				</tbody>
			</table>
		</div>
		<div class="tile p-5">
			<i class="icon"></i> Remember that the version used is latest.
		</div>
	</div>
</div>

